@model List<FavoriteShloka>

<div class="container">
    <h2 class="text-center mb-4">Your Favorite Shlokas</h2>
    
    <div id="favorites-list" class="favorite-list">
        <!-- Favorites will be loaded here dynamically -->
    </div>
</div>

@section Scripts {
    <script>
        function loadFavorites() {
            const favorites = JSON.parse(localStorage.getItem('favorites') || '[]');
            const favoritesList = document.getElementById('favorites-list');
            favoritesList.innerHTML = '';

            if (favorites.length === 0) {
                favoritesList.innerHTML = `
                    <div class="text-center">
                        <p>You haven't added any shlokas to your favorites yet.</p>
                    </div>`;
                return;
            }

            favorites.forEach(favorite => {
                const favoriteItem = document.createElement('div');
                favoriteItem.className = 'favorite-item mb-4 p-3 border rounded';
                favoriteItem.innerHTML = `
                    <div class="d-flex justify-content-between align-items-center">
                        <h5>${favorite.chapterName} - Shloka ${favorite.shlokaNumber}</h5>
                        <button class="btn btn-link favorite-btn active" 
                                onclick="toggleFavorite(${favorite.shlokaId}, '${favorite.chapterName}', ${favorite.shlokaNumber}, '${favorite.shlokaText}')">
                            <i class="fas fa-heart text-danger"></i>
                        </button>
                    </div>
                    <div class="shloka-text mt-2">
                        ${favorite.shlokaText}
                    </div>`;
                favoritesList.appendChild(favoriteItem);
            });
        }

        function toggleFavorite(shlokaId, chapterName, shlokaNumber, shlokaText) {
            let favorites = JSON.parse(localStorage.getItem('favorites') || '[]');
            const index = favorites.findIndex(f => f.shlokaId === shlokaId);

            if (index === -1) {
                favorites.push({
                    shlokaId,
                    chapterName,
                    shlokaNumber,
                    shlokaText,
                    createdAt: new Date().toISOString()
                });
            } else {
                favorites.splice(index, 1);
            }

            localStorage.setItem('favorites', JSON.stringify(favorites));
            loadFavorites();
        }

        // Load favorites when the page loads
        document.addEventListener('DOMContentLoaded', loadFavorites);
    </script>
} 